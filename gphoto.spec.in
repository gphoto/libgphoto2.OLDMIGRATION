Summary: Library to access digital cameras
Name: @PACKAGE@
Version: @VERSION@
Release: 0
License: LGPL
Group: Applications/Multimedia
BuildRoot: %{_tmppath}/%{name}-root
Source: http://www.gphoto.org/dist/%{name}-%{version}.tar.gz
Url: http://www.gphoto.org/
Requires: libusb
BuildRequires: libusb-devel
BuildRequires: gtk-doc
BuildRequires: findutils perl


%description
The gPhoto2 project is a universal, free application and library
framework that lets you download images from several different
digital camera models, including the newer models with USB
connections. Note that
a) for some older camera models you must use the old "gphoto" package.
b) for USB mass storage models use the driver in the kernel

This package contains the command-line utility gphoto2.

%package -n libgphoto2
Summary: Library for accessing digital cameras.
Provides: libgphoto
Requires: libusb
Group: System Environment/Libraries

%description -n libgphoto2
The gPhoto2 project is a universal, free application and library
framework that lets you download images from several different
digital camera models, including the newer models with USB
connections. Note that for some older camera models you must use
the old "gphoto" package.

This package contains the library that digital camera applications
can use.

%package -n libgphoto2-devel
Summary: Headers and links to compile against the libgphoto2 library.
Requires: libgphoto2 >= %{version}
Provides: libgphoto-devel
Group: Development/Libraries

%description -n libgphoto2-devel
The gPhoto2 project is a universal, free application and library
framework that lets you download images from several different
digital camera models, including the newer models with USB
connections. Note that for some older camera models you must use
the old "gphoto" package.

This package contains the files needed to compile applications that
use libgphoto2.

%prep
rm -rf $RPM_BUILD_DIR/%{name}-%{version}
%setup -q -n %{name}-%{version}

%build
CFLAGS="${CFLAGS:-%optflags}" ; export CFLAGS ;
CXXFLAGS="${CXXFLAGS:-%optflags}" ; export CXXFLAGS ;
FFLAGS="${FFLAGS:-%optflags}" ; export FFLAGS ;
%{?__libtoolize:[ -f configure.in ] && %{__libtoolize} --copy --force} ;
./configure %{_target_platform} \
        --prefix=%{_prefix} \
        --exec-prefix=%{_exec_prefix} \
        --bindir=%{_bindir} \
        --sbindir=%{_sbindir} \
        --sysconfdir=%{_sysconfdir} \
        --datadir=%{_datadir} \
        --includedir=%{_includedir} \
        --libdir=%{_libdir} \
        --libexecdir=%{_libexecdir} \
        --localstatedir=%{_localstatedir} \
        --sharedstatedir=%{_sharedstatedir} \
        --mandir=%{_mandir} \
        --infodir=%{_infodir} \
        --with-html-dir=%{_docdir}/%{name}-%{version}/html
make

%install
rm -rf $RPM_BUILD_ROOT

make DESTDIR=%{buildroot} \
        prefix=%{_prefix} \
        exec_prefix=%{_exec_prefix} \
        bindir=%{_bindir} \
        sbindir=%{_sbindir} \
        sysconfdir=%{_sysconfdir} \
        datadir=%{_datadir} \
        docdir=%{_docdir} \
        includedir=%{_includedir} \
        libdir=%{_libdir} \
        libexecdir=%{_libexecdir} \
        localstatedir=%{_localstatedir} \
        sharedstatedir=%{_sharedstatedir} \
        mandir=%{_mandir} \
        infodir=%{_infodir} \
install

%post -p /sbin/ldconfig -n libgphoto2
%postun -p /sbin/ldconfig -n libgphoto2

%clean
rm -rf $RPM_BUILD_ROOT


##### gphoto2
%files
%defattr(-,root,root)
%docdir %{_docdir}/gphoto2
%doc README
%{_bindir}/*
%{_datadir}/*/*

##### libgphoto2
%files -n libgphoto2
%defattr(-,root,root)
%{_libdir}/*.so.*
# Here are only ".so" and no ".so.XXX" packages, so the ".so" have to be in
# the main package
%{_libdir}/gphoto2/*.so
%{_libdir}/gphoto2_port/*.so.*

##### libgphoto2-devel
%files -n libgphoto2-devel
%defattr(-,root,root)
%{_includedir}/gphoto2/*
%{_libdir}/*.so
%{_libdir}/*.a
%{_libdir}/*.la
%{_libdir}/gphoto2/*.a
%{_libdir}/gphoto2/*.la
%{_libdir}/gphoto2_port/*.so
%{_libdir}/gphoto2_port/*.a
%{_libdir}/gphoto2_port/*.la
%{_libdir}/gphoto2portConf.sh

%changelog
* Sun Oct 14 2001 Hans Ulrich Niedermann <ulrich@niedermann.bb.bawue.de>
- 2.0beta3

* Tue Oct  2 2001 Tim Waugh <twaugh@redhat.com> 2.0beta2-0.1
- Adapted for Red Hat Linux.
- 2.0beta2.

* Mon Aug  6 2001 Till Kamppeter <till@mandrakesoft.com> 2.0-0.beta1.2mdk
- Corrected "Requires:"

* Mon Aug  6 2001 Till Kamppeter <till@mandrakesoft.com> 2.0-0.beta1.1mdk
- Initial release



