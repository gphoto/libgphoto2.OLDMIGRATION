#!/bin/sh

set -e

export CAMLIBS="@camlibdir@"

true ./test-ddb<<EOF
# This is a pre-alpha test example

device "Canon PowerShot G1"
{
	driver "canon";
	operations config;
	
	interface serial
	{
		speeds 9600, 19200, 38400, 57600, 115200;
	};
	interface usb
	{
		vendor  0x04a9;
		product 0x3040;
	};
};

device "Canon PowerShot G2"
{
	driver "canon";
	interface usb
	{
		vendor  0x04a9;
		product 0x3055;
	};
};

EOF

@top_builddir@/packaging/generic/print-camera-list gp2ddb > gp2ddb.txt
true ./test-ddb gp2ddb.txt

./test-ddb --compare < gp2ddb.txt
